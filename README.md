# Air Learning
Aerial robotics is a cross-layer and interdisciplinary field. Designing an autonomous aerial robot to perform a task involves interactions between various boundaries spanning from modeling the environment down to the choice of onboard computer platform available in the robot. Our goal through building Air Learning is to provide researchers with a cross-domain infrastructure that allows them to holistically study and evaluate reinforcement learning algorithms for aerial autonomous machines. Air Learning is built on top of several open-source tools such as Microsoft AirSim, OpenAI Gym, Stable-Baselines,and Epic games Unreal Engine.

The main components of Air Learning infratructure is depicted below:
![](https://github.com/harvard-edge/airlearning/blob/master/docs/images/airl-infrastructure.png)

## Air Learning Environment Generator
Learning algorithms are data hungry, and the availability of high-quality data is vital for the learning process. Also, an environment that is good to learn from should include different scenarios that are challenging for the robot. By adding these challenging situations, they learn to solve those challenges. For instance, for teaching a robot to navigate obstacles, the data set should have a wide variety of obstacles (materials, textures, speeds, etc.) during the training process.

We designed an environment generator specifically targeted for autonomous UAVs. Air Learning's environment generator creates high fidelity photo-realistic environments for the UAVs to fly in. The environment generator is built on top of UE4 and uses the AirSim UE4 plugin for the UAV model and flight physics. The environment generator with the AirSim plugin is exposed as OpenAI gym interface. 

The environment generator has different configuration knobs for generating challenging environments. The configuration knobs available in the current version can be classified into two categories. The first category includes the parameters that can be controlled via a game configuration file. The second category consists of the parameters that can be controlled outside the game configuration file. The full list of parameters that can be controlled are shown in the table below:

| Parameter           	| Format                  	| Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 	|
|---------------------	|-------------------------	|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------	|
| Arena Size          	| [length, width, height] 	| The Arena Size is the total volume available in the environment. It is represented by [length, width, height] tuple. A large arena size means the UAV has to cover more distance in reaching the goal which directly impacts its energy and mission success.  The arena can be customized by adding materials, which we describe in the "materials" section.                                                                                                                                                              	|
| Wall Colors         	| [R, G, B]               	| The Wall Color parameter can be used to set the wall colors of the arena. The parameter takes [R, G, B] tuple as input. By setting different values of [R, G, B], any color in the visible spectrum can be applied to the walls. The neural network policies show sensitivity towards different colors and varying these color during training can help the policy to generalize well.                                                                                                                                      	|
| # Static Obstacles  	| Scalar Integer          	| The # Static Obstacles is a parameter that describes the total number of static objects that is spawned in the environment. Using this parameter, we can generate environments ranging from very dense to very sparse obstacles. Depending upon the value of this parameter, the navigation complexity can be easy or difficult. A large number of obstacles increases the collision probability and can be used for stressing the efficacy of reinforcement learning algorithms.                                           	|
| # Dynamic Obstacles 	| Scalar Integer          	| The # Dynamic Obstacles is a parameter that describes the total number of obstacles that can move in the environment.                                                                                                                                                                                                                                                                                                                                                                                                       	|
| Seed                	| Scalar Integer          	| The Seed parameter is used for randomizing the different parameters in the environment. By setting the same 'Seed' value, we can reproduce (and randomize) the environment (obstacle position, goal position, etc.).                                                                                                                                                                                                                                                                                                        	|
| Minimum Distance    	| Scalar Integer          	| The Minimum distance is a parameter that controls the minimum distance between two static objects in the arena. This parameter in conjunction with # Static Obstacles is what determines congestion.                                                                                                                                                                                                                                                                                                                        	|
| Goal Position       	| [X, Y, Z]               	| The Goal Position is a parameter that specifies the destination coordinate that the UAV must reach. The Goal Position coordinates should always be inside the arena, and there is error checking for input errors. Similar to # Static Obstacles, it increases task complexity.                                                                                                                                                                                                                                             	|
| Velocity            	| [Vmax, Vmin]            	| The Velocity parameter is a tuple of the form [V_min, V_max] that works with # Dynamic Obstacles. The environment generator randomly chooses a value from this range for the velocity of a dynamic obstacle. This coupled with the # Dynamic Obstacles helps control how dynamic and challenging the environment is for the aerial robot.                                                                                                                                                                                   	|
| Asset               	| [folder name]           	| An Asset in Air Learning is a mesh in UE4. Any asset that is available in the project can be used as a static obstacle, dynamic obstacle, or both. At simulation startup, Air Learning uses these assets as either a static or dynamic obstacle. The number of assets that will be spawned in the arena will be equal to the # Static Obstacle and # Dynamic Obstacle parameter. By having the ability to spawn any asset as an obstacle, the UAV agent can generalize to avoid collision with different types of obstacle. 	|
| Materials           	| [folder name]           	| A Material is a UE4 asset that can be applied to meshes to control the visual look of the scene. Material is usually made of multiple textures to create a particular visual effect for the asset. At simulation startup, Air Learning environment generator applies materials to matching assets.                                                                                                                                                                                                                          	|
| Textures            	| [folder name]           	| A Texture is an image that is used on an UE4 asset. They are mapped to the surfaces of any given asset. At startup, the environment generator applies textures to matching assets. Textures and materials help the training algorithm capture different object features, which is important to help the algorithm generalize.                                                                                                                                                                                               	|

### Demonstration of Air Learning Environment Generator
Here is an simple demo to show how we can use Air Learning environment generator to convert a UE4 mesh into a dynamic obstacle.

<p align="center">
<img src= "https://github.com/harvard-edge/airlearning/blob/master/docs/images/environment_generator.gif" >
</p>


Applying different materials to the same obstalces:

![](https://github.com/harvard-edge/airlearning/blob/master/docs/images/materials.jpg)


For information on installing Air Learning environment generator, check the following [repository](https://github.com/harvard-edge/airlearning-ue4/tree/b4f27ea457936609745ddad1191ab8c54f8799ac) or follow the airlearning-ue4 sub-module in this repository.

## Air Learning RL

## Hardware Evaluation


